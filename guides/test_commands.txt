RadarLink Module Test Commands
=================================

1. CSV → JSON Conversion
------------------------
Command:
    cd ~/radarlink/src
    python3 -m radarlink.tools.csv2json ../../data/sample_tracks.csv -o ../../data/sample_tracks.ndjson

Expected Output:
    Creates: data/sample_tracks.ndjson
    Example line:
    {"timestamp_ms": 1612360132626, "range_mean": 67.88, "azimuth_mean": 164.99, "velocity_mean": 8.27, "snr_mean_db": 35.42}

# NDJSON (streaming-friendly)
python3 src/radarlink/tools/csv2json.py data/sample_tracks.csv -o data/sample_tracks.ndjson

# JSON array (easier to eyeball)
python3 src/radarlink/tools/csv2json.py data/sample_tracks.csv --format array -o data/sample_tracks.json



2. geo/loc_convert.py
----------------------
Command:
    cd ~/radarlink/src
    python3 - <<'PY'
    from radarlink.geo.loc_convert import RadarLocConverter

    conv = RadarLocConverter()
    print(conv.polar_to_cart(1000, 0, 0))     # expect (x≈0, y≈1000, z≈0)
    print(conv.polar_to_cart(1000, 90, 0))    # expect (x≈1000, y≈0, z≈0)
    print(conv.polar_to_cart(1000, 0, 45))    # expect (x≈0, y≈707, z≈707)
    PY

Expected Output:
    (0.0, 1000.0, 0.0)
    (1000.0, 0.0, 0.0)
    (0.0, 707.1, 707.1)


3. rel_vec.py
-------------
Command:
    cd ~/radarlink/src
    python3 - <<'PY'
    from radarlink.tools.rel_vec import compute_relative

    result = compute_relative([0, 130, 100], [0, 210, 200], [0, 12, 10])
    print(result)
    PY

Expected Output:
    {'HT': (30, 10, 2), 'distance': 31.64}


4. rel_vec_compute.py
----------------------
Command:
    cd ~/radarlink/src
    python3 -m radarlink.tools.rel_vec_compute --infile ../../data/sample_tracks.ndjson       --interceptor "100,200,10" -o ../../data/rel_ht.ndjson

Expected Output:
    File created: data/rel_ht.ndjson
    Example line:
    {"enu": {"e": 30.0, "n": 10.0, "u": 2.0}, "bearing_deg": 71.56, "slant_m": 31.64}


5. compare_vel.py
-----------------
Command:
    cd ~/radarlink/tests
    python3 compare_vel.py

Expected Output:
    corr(rdot, velocity_mean) ≈ 0.007


Summary Table
--------------
| Tool | Command | Description |
|------|----------|--------------|
| csv2json | python3 -m radarlink.tools.csv2json ../../data/sample_tracks.csv -o ../../data/sample_tracks.ndjson | Converts CSV → NDJSON |
| loc_convert | (inline python) | Converts polar to Cartesian |
| rel_vec | (inline python) | Computes target–interceptor vector |
| rel_vec_compute | python3 -m radarlink.tools.rel_vec_compute --infile ../../data/sample_tracks.ndjson --interceptor "100,200,10" -o ../../data/rel_ht.ndjson | Full relative-vector pipeline |
| compare_vel | python3 compare_vel.py | Checks correlation between radial speed & dataset velocity |